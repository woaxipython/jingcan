<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta17
* @link https://tabler.io
* Copyright 2018-2023 The Tabler Authors
* Copyright 2018-2023 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
{% extends "PromotionBase.html" %}
<!-- Navbar -->
{% block promotion %}
    <div class="page-wrapper">
        <!-- Page header -->
        <div class="page-header d-print-none">
            <div class="container-xl">
                <div class="row g-2 align-items-center">
                    <div class="col">
                        <!-- Page pre-title -->
                        <div class="page-pretitle">
                        </div>
                        <h2 class="page-title">
                            小红书图文
                        </h2>
                    </div>
                    <!-- Page title actions -->
                </div>
            </div>
        </div>
        <!-- Page body -->
        <div class="page-body">
            <div class="container-xl">
                <div class="row row-deck row-cards">
                    <div class="col-sm-6 col-lg-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="subheader">累计发布</div>
                                </div>
                                <div class="h1 mb-3"><span>10000</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="subheader">图文数量</div>
                                </div>
                                <div class="h1 mb-3"><span>10000</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="subheader">视频数量</div>
                                </div>
                                <div class="h1 mb-3"><span>10000</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-lg-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex align-items-center">
                                    <div class="subheader">点赞数量</div>
                                </div>
                                <div class="h1 mb-3"><span>10000</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="row row-cards">
                            <div class="col-sm-6 col-lg-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                            <span class="bg-danger text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/currency-dollar -->
<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2"
     stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none"
                                                                                            d="M0 0h24v24H0z"
                                                                                            fill="none"></path><path
        d="M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z"></path><path d="M19 16h-12a2 2 0 0 0 -2 2"></path><path
        d="M9 8h6"></path></svg>
                            </span>
                                            </div>
                                            <div class="col">
                                                <div class="font-weight-medium">
                                                    <span>自营数量 </span><span id="own_send"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                            <span class="bg-green text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/shopping-cart -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"
                                                                                        fill="none"/><path
                                      d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path
                                      d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M17 17h-11v-14h-2"/><path
                                      d="M6 5l14 1l-1 7h-13"/></svg>
                            </span>
                                            </div>
                                            <div class="col">
                                                <div class="font-weight-medium">
                                                    <span>达人数量 </span><span id="co_send"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                            <span class="bg-facebook text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-facebook -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"
                                                                                        fill="none"/><path
                                      d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"/></svg>
                            </span>
                                            </div>
                                            <div class="col">
                                                <div class="font-weight-medium">
                                                    <span>素人数量 </span><span id="ks_send"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card card-sm">
                                    <div class="card-body">
                                        <div class="row align-items-center">
                                            <div class="col-auto">
                            <span class="bg-twitter text-white avatar"><!-- Download SVG icon from http://tabler-icons.io/i/brand-twitter -->
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                   viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                   stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"
                                                                                        fill="none"/><path
                                      d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z"/></svg>
                            </span>
                                            </div>
                                            <div class="col">
                                                <div class="font-weight-medium">
                                                    <span>其他 </span><span id="other_send"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">推广列表</h3>
                            </div>
                            <div class="card-body border-bottom py-3">
                                <form action="{{ url_for("xhs.manage") }}" method="post">
                                    <input type="hidden" name="csrf_token"
                                           value="{{ csrf_token() }}">
                                    <input type="hidden" name="interval" value="171">
                                    <input type="hidden" name="self" value="0">
                                    <input type="hidden" name="contenttype" value="0">
                                    <input type="hidden" name="nickname" value="0">
                                    <input type="hidden" name="group_name" value="0">
                                    <div class="d-flex">
                                        <div class="me-2 d-inline-block">
                                            <select class="form-control px-2 select-input" data-select="interval">
                                                <option value="0" disabled selected>发布时间</option>
                                                <option value="1">最近1天</option>
                                                <option value="30">最近30天</option>
                                                <option value="60">最近60天</option>
                                                <option value="90">最近90天</option>
                                                <option value="180">最近180天</option>
                                                <option value="365">最近1年</option>
                                                <option value="730">最近2年</option>
                                            </select>
                                        </div>
                                        <div class="me-2 d-inline-block">
                                            <select class="form-control px-2 select-input" data-select="self">
                                                <option value="0" disabled selected>账号类型</option>
                                                {% for self in selfs %}
                                                    {% if self.name %}
                                                        <option value="{{ self.name }}">{{ self.name }}</option>
                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="me-2 d-inline-block">
                                            <select class="form-control px-2 select-input" data-select="contenttype">
                                                <option value="0" disabled selected>内容形式</option>
                                                {% for contenttype in contenttypes %}
                                                    {% if contenttype.name %}
                                                        <option value="{{ contenttype.name }}">{{ contenttype.name }}</option>
                                                    {% endif %}
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="me-2 d-inline-block">
                                            <select class="form-control px-2 select-input" data-select="nickname">
                                                <option value="0" disabled selected>自营账号</option>
                                                {% for account in accounts %}
                                                    <option value="{{ account.id }}">{{ account.nickname }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="me-2 d-inline-block">
                                            <select class="form-control px-2 select-input" data-select="group_name">
                                                <option value="0" disabled selected>相关产品</option>
                                                {% for group in groups %}
                                                    <option value="{{ group.id }}">{{ group.name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div class="ms-auto text-muted">
                                            <button type="reset" class="btn btn-blue px-3">重置</button>
                                        </div>
                                        <div class="ms-2 text-muted">
                                            <button type="submit" class="btn btn-blue px-3">查找</button>
                                        </div>
                                        <div class="ms-2 text-muted">
                                            <button type="button" class="btn btn-danger px-3">下载数据</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                            <div class="table-responsive">
                                <table class="table card-table table-vcenter text-nowrap datatable"
                                       id="promotionManageTable">
                                    <thead class="sticky-top">
                                    <tr>
                                        <th>账号</th>
                                        <th>标题</th>
                                        <th>点赞</th>
                                        <th>评论</th>
                                        <th>收藏</th>
                                        <th>内容形式</th>
                                        <th>自营</th>
                                        <th>发布时间</th>
                                        <th>
                                            <div class="d-flex justify-content-center">详情</div>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for pvcontent in pvcontents %}
                                        <tr data-id="{{ pvcontent.id }}">
                                            <td>
                                                <small><a
                                                        href="{{ pvcontent.profile_link }}"
                                                        target="_blank"><span>{{ pvcontent.account }}</span></a></small>
                                            </td>
                                            <td>
                                                <div style="width: 200px" class="text-truncate">
                                                    {% if pvcontent.title %}
                                                        <small><a
                                                                href="{{ pvcontent.link }}"
                                                                target="_blank"><span>{{ pvcontent.title }}</span></a></small>
                                                    {% else %}
                                                        <small><a href="{{ pvcontent.link }}" target="_blank"><span
                                                                class="text-danger">内容跑丢了</span></a></small>
                                                    {% endif %}
                                                </div>
                                                <div>
                                                    <small><span class="text-muted">{{ pvcontent.group }}</span></small>
                                                </div>
                                            </td>
                                            <td>
                                                {% if pvcontent.title %}
                                                    {{ pvcontent.liked }}
                                                {% else %}
                                                    0
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if pvcontent.title %}
                                                    {{ pvcontent.commented }}
                                                {% else %}
                                                    0
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if pvcontent.title %}
                                                    {{ pvcontent.collected }}
                                                {% else %}
                                                    0
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if pvcontent.video %}
                                                    <small><span
                                                            class="text-danger">视频</span></small>
                                                {% else %}
                                                    <small><span class="text-muted text-black">图文</span></small>
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if pvcontent.self %}
                                                    <small><span
                                                            class="text-danger">{{ pvcontent.self }}</span></small>
                                                {% else %}
                                                    <small><span class="text-muted text-black">否</span></small>
                                                {% endif %}
                                            </td>
                                            <td>
                                                {% if pvcontent.date %}
                                                    <small><span
                                                            class="text-muted text-black">{{ pvcontent.date }}</span></small>

                                                {% else %}
                                                    -
                                                {% endif %}
                                            </td>
                                            <td>
                                                                                        <span class="text-danger hover-shadow p-1 cursor-pointer d-flex justify-content-center"
                                                                                              data-bs-toggle="tooltip"
                                                                                              data-bs-placement="top"
                                                                                              title="数据展示功能待开发">
                                                                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                                                                     class="icon icon-tabler icon-tabler-antenna-bars-5"
                                                                                                     width="24"
                                                                                                     height="24"
                                                                                                     viewBox="0 0 24 24"
                                                                                                     stroke-width="2"
                                                                                                     stroke="currentColor"
                                                                                                     fill="none"
                                                                                                     stroke-linecap="round"
                                                                                                     stroke-linejoin="round">
                                                                                                    <path stroke="none"
                                                                                                          d="M0 0h24v24H0z"
                                                                                                          fill="none"></path>
                                                                                                    <path d="M6 18l0 -3"></path>
                                                                                                    <path d="M10 18l0 -6"></path>
                                                                                                    <path d="M14 18l0 -9"></path>
                                                                                                    <path d="M18 18l0 -12"></path>
                                                                                                </svg>
                                                                                                </span></td>
                                            {#                                            <td>{{ promotion.user.name }}</td>#}
                                            {#                                            <td>{{ promotion.bloger.wechat }}</td>#}
                                            {#                                            <td>#}
                                            {#                                                <div style="max-width: 15rem;min-width: 10rem"#}
                                            {#                                                     class="text-truncate m-0 cursor-pointer"#}
                                            {#                                                     data-bs-container="body"#}
                                            {#                                                     data-bs-toggle="popover"#}
                                            {#                                                     data-bs-placement="top"#}
                                            {#                                                     title="{{ PVcontent.account.nickname }}"#}
                                            {#                                                     data-bs-html="true"#}
                                            {#                                                     data-bs-content='{% for group in promotion.group %}#}
                                            {#                                                     <span class="badge bg-danger me-1"></span>{{ group.name }}<br>#}
                                            {#                                                     {% endfor %}'>#}
                                            {#                                                    <div>#}
                                            {#                                                        <small class="text-muted">{{ PVcontent.account.plat.name }}</small>#}
                                            {#                                                    </div>#}
                                            {#                                                    <a href="{{ PVcontent.account.profile_link }}"#}
                                            {#                                                       class="">{{ PVcontent.account.nickname }}</a><br>#}
                                            {#                                                    <small class="text-muted">#}
                                            {#                                                        <span>合作产品：</span>#}
                                            {#                                                        {% for group in promotion.group %}#}
                                            {#                                                            <span class="badge bg-danger"></span>#}
                                            {#                                                            <span>{{ group.name }}</span>#}
                                            {#                                                        {% endfor %}#}
                                            {#                                                    </small>#}
                                            {#                                                </div>#}
                                            {#                                            </td>#}
                                            {##}
                                            {#                                            <td>#}
                                            {#                                                <div>#}
                                            {#                                                    <small><span#}
                                            {#                                                            class="text-muted">付费 </span></small><span>{{ promotion.fee }}</span><span>元</span>#}
                                            {#                                                </div>#}
                                            {#                                                <div>#}
                                            {#                                                    <small><span#}
                                            {#                                                            class="text-muted">佣金 </span></small><span>{{ promotion.commission*100 }}</span><span>%</span>#}
                                            {#                                                </div>#}
                                            {#                                            </td>#}
                                            {#                                            <td>#}
                                            {#                                                <div>#}
                                            {#                                                    <span class="badge bg-success me-1"></span>{{ promotion.rate.name }}#}
                                            {#                                                </div>#}
                                            {#                                            </td>#}
                                            {#                                            <td>#}
                                            {#                                                <div class="text-truncate"#}
                                            {#                                                     style="min-width: 15rem; max-width: 20rem">#}
                                            {#                                                    <div class="cursor-pointer">#}
                                            {#                                                        <a {% if PVcontent.content_link %}#}
                                            {#                                                            href="{{ PVcontent.content_link }}"#}
                                            {#                                                        {% else %}#}
                                            {#                                                            href="javascript:void(0)"#}
                                            {#                                                            data-bs-toggle="tooltip"#}
                                            {#                                                            data-bs-placement="top"#}
                                            {#                                                            title="链接尚未更新"#}
                                            {#                                                        {% endif %} >#}
                                            {#                                                            {% if PVcontent.title %}#}
                                            {#                                                                {{ PVcontent.title }}#}
                                            {#                                                            {% else %}#}
                                            {#                                                                {{ "待更新" }}#}
                                            {#                                                            {% endif %}#}
                                            {#                                                        </a>#}
                                            {#                                                    </div>#}
                                            {#                                                    <div class="cursor-pointer"#}
                                            {#                                                         data-bs-container="body"#}
                                            {#                                                         data-bs-toggle="popover"#}
                                            {#                                                         data-bs-placement="top"#}
                                            {#                                                         title="{{ PVcontent.account.nickname }}"#}
                                            {#                                                         data-bs-html="true"#}
                                            {#                                                         data-bs-content='{{ PVcontent.liked }}/{{ PVcontent.collected }}/{{ PVcontent.commented }}'>#}
                                            {#                                                        <small class="text-muted">#}
                                            {#                                                            <small class="me-1"><span>发布时间：</span>#}
                                            {#                                                                {% if PVcontent.upload_time %}#}
                                            {#                                                                    <span>{{ PVcontent.upload_time.strftime("%Y-%m-%d") }}</span>#}
                                            {#                                                                {% else %}#}
                                            {#                                                                    <span>-</span>#}
                                            {#                                                                {% endif %}#}
                                            {#                                                            </small>#}
                                            {#                                                            <span>赞:</span>#}
                                            {#                                                            {% if PVcontent.liked %}#}
                                            {#                                                                <span>{{ PVcontent.liked }}</span>#}
                                            {#                                                            {% else %}#}
                                            {#                                                                <span>0</span>#}
                                            {#                                                            {% endif %}#}
                                            {#                                                            <span>藏:</span>#}
                                            {#                                                            {% if PVcontent.collected %}#}
                                            {#                                                                <span>{{ PVcontent.collected }}</span>#}
                                            {#                                                            {% else %}#}
                                            {#                                                                <span>0</span>#}
                                            {#                                                            {% endif %}#}
                                            {#                                                            <span>评:</span>#}
                                            {#                                                            {% if PVcontent.commented %}#}
                                            {#                                                                <span>{{ PVcontent.commented }}</span>#}
                                            {#                                                            {% else %}#}
                                            {#                                                                <span>0</span>#}
                                            {#                                                            {% endif %}#}
                                            {#                                                        </small>#}
                                            {#                                                    </div>#}
                                            {#                                                    <div class="text-truncate cursor-pointer">#}
                                            {#                                                        <small class="text-muted"><span#}
                                            {#                                                                class="bg-danger badge"></span><code> {{ PVcontent.output.name }}</code></small>#}
                                            {#                                                    </div>#}
                                            {#                                                </div>#}
                                            {#                                            </td>#}
                                            {#                                            <td>#}
                                            {#                                                <div>#}
                                            {#                                                    <a data-fslightbox="gallery"#}
                                            {#                                                       href="../static/upload/images/{{ promotion.feeImgLink }}">#}
                                            {#                                                        <!-- Photo -->#}
                                            {#                                                        <div class="img-responsive img-responsive-16x9 rounded-3 border"#}
                                            {#                                                             style="background-image: url(../static/upload/images/{{ PVcontent.promotion.feeImgLink }})"></div>#}
                                            {#                                                    </a>#}
                                            {#                                                </div>#}
                                            {#                                            </td>#}
                                            {#                                            <td>#}
                                            {#                                            <span class="text-danger hover-shadow p-1 cursor-pointer d-flex justify-content-center"#}
                                            {#                                                  data-bs-toggle="tooltip"#}
                                            {#                                                  data-bs-placement="top"#}
                                            {#                                                  title="数据展示功能待开发">#}
                                            {#                                                    <svg xmlns="http://www.w3.org/2000/svg"#}
                                            {#                                                         class="icon icon-tabler icon-tabler-antenna-bars-5" width="24"#}
                                            {#                                                         height="24" viewBox="0 0 24 24" stroke-width="2"#}
                                            {#                                                         stroke="currentColor" fill="none" stroke-linecap="round"#}
                                            {#                                                         stroke-linejoin="round">#}
                                            {#                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>#}
                                            {#                                                        <path d="M6 18l0 -3"></path>#}
                                            {#                                                        <path d="M10 18l0 -6"></path>#}
                                            {#                                                        <path d="M14 18l0 -9"></path>#}
                                            {#                                                        <path d="M18 18l0 -12"></path>#}
                                            {#                                                    </svg>#}
                                            {#                                                    </span></td>#}
                                            {#                                            <td class="text-center">#}
                                            {#                                                <a href="" data-bs-toggle="modal" class="editPromotion"#}
                                            {#                                                   data-bs-target="#edit-promotion-report"#}
                                            {#                                                   aria-label="Create new report">编辑</a>#}
                                            {#                                            </td>#}
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer footer-transparent d-print-none">
            <div class="container-xl">
                <div class="row text-center align-items-center flex-row-reverse">
                    <div class="col-lg-auto ms-lg-auto">
                        <ul class="list-inline list-inline-dots mb-0">
                            <li class="list-inline-item">
                                <a href="https://github.com/sponsors/codecalm" target="_blank" class="link-secondary"
                                   rel="noopener">
                                    <!-- Download SVG icon from http://tabler-icons.io/i/heart -->
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         class="icon text-pink icon-filled icon-inline" width="24" height="24"
                                         viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                         stroke-linecap="round" stroke-linejoin="round">
                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                                        <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"/>
                                    </svg>
                                    Actions and thoughts are equally important.
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>
{% endblock %}
{% block modal %}

{% endblock %}
<!-- Libs JS -->
{% block script %}
    <script>
        getPromotiondata()
    </script>
    <script>
        $(function () {
            $('#promotionManageTable').DataTable({
                "paging": true,
                "lengthChange": false,
                "searching": false,
                "ordering": true,
                language: {
                    info: '共计 _TOTAL_ 条推广数据',
                    paginate: {
                        next: '下一页',
                        previous: '上一页',
                        first: '首页',
                        last: '尾页'
                    },
                    zeroRecords: '没有找到符合条件的数据',
                    infoEmpty: '没有符合条件的数据',
                    infoFiltered: '(从 _MAX_ 条数据中过滤)'

                },
            });
        });
        $(function () {

        });
    </script>
    <script>
        var nav_bar = $('.navbar-nav li');
        nav_bar.removeClass('active');
        nav_bar.eq(2).addClass('active');
        var var_a = nav_bar.eq(2).find('a')
        var_a.removeClass('active');
        var_a.eq(1).addClass('active');
    </script>
{% endblock %}